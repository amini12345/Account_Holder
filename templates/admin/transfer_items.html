{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block title %}{{ title }}{% endblock %}

{% block extrahead %}{{ block.super }}
<script src="{% url 'admin:jsi18n' %}"></script>
{{ media }}
{% endblock %}

{% block content %}
<h1>{{ title }}</h1>

<form method="post">
    {% csrf_token %}
    
    <div class="form-row">
        <div>
            <h3>کالاهای انتخاب شده:</h3>
            <ul>
                {% for item in items %}
                <li>{{ item.Technical_items }} - {{ item.serial_number }} - مالک فعلی: 
                    {% if item.PersonalInfo %}
                        {{ item.PersonalInfo.name }} {{ item.PersonalInfo.family }}
                    {% else %}
                        بدون مالک
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <fieldset class="module aligned">
        <div class="form-row">
            <div>
                <label for="{{ form.to_person.id_for_label }}">{{ form.to_person.label }}:</label>
                {{ form.to_person }}
                {% if form.to_person.help_text %}
                    <p class="help">{{ form.to_person.help_text }}</p>
                {% endif %}
            </div>
        </div>

        <div class="form-row">
            <div>
                <label for="{{ form.description.id_for_label }}">{{ form.description.label }}:</label>
                {{ form.description }}
                {% if form.description.help_text %}
                    <p class="help">{{ form.description.help_text }}</p>
                {% endif %}
            </div>
        </div>
    </fieldset>

    <div class="submit-row">
        <input type="submit" value="انتقال کالاها" name="apply" class="default">
        <a href="{% url 'admin:holder_items_changelist' %}" class="button cancel-link">انصراف</a>
    </div>
</form>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add any JavaScript functionality here if needed
});
</script>

{% endblock %}